<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>my-switch-app</title>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Switch Framework Styles -->
    <link rel="stylesheet" href="src/static/css/switch.css">
    <link rel="stylesheet" href="src/static/css/ui.css">
    <link rel="stylesheet" href="src/static/css/app.css">
    <link rel="stylesheet" href="src/static/css/ui/ui-kit.css">
    <link rel="stylesheet" href="src/static/css/enhanced.css">
    <link rel="stylesheet" href="src/static/css/advanced.css">

    <style>
        /* Animation and transition styles */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-in {
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .zoom-in {
            animation: zoomIn 0.5s ease-in-out;
        }

        @keyframes zoomIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Theme toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: #333;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark-mode .theme-toggle {
            color: #f5f5f5;
        }

        .dark-mode .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
    </style>

    <!-- Initial Component Data -->
    <script>
        window.SWITCH_INITIAL_DATA = {
            name: "App",
            props: {
                title: "my-switch-app",
                currentPage: "home"
            }
        };

        window.SWITCH_ENV = {
            debug: true,
            hmr: true,
            ssr: false
        };
    </script>
</head>
<body>
    <!-- Main Content Container -->
    <div id="app-container" class="fade-in">
        <!-- Content will be loaded here -->
    </div>

    <!-- Switch Root Element -->
    <div id="switch-root">
        <!-- Switch components will be rendered here -->
    </div>

    <!-- Switch Framework Scripts -->
    <script src="src/static/js/dom.js"></script>
    <script src="src/static/js/switch.js"></script>
    <script src="src/static/js/store.js"></script>
    <script src="src/static/js/components.js"></script>
    <script src="src/static/js/ssr.js"></script>
    <script src="src/static/js/ui.js"></script>
    <script src="src/static/js/app.js"></script>
    <script src="src/static/js/index.js"></script>
    <script src="src/static/js/ui-kit.js"></script>

    <!-- Enhanced Switch Framework -->
    <script src="src/static/js/switch-enhanced.js"></script>

    <!-- Mono Layout, Frames, and Hydration -->
    <script src="src/lib/mono_layout_parser.js"></script>
    <script src="src/lib/mono_frames.js"></script>
    <script src="src/lib/mono_hydration.js"></script>

    <!-- Application Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create the Switch global object
            window.Switch = {
                // Create a component
                component: function(name, props) {
                    return {
                        name: name,
                        props: props || {}
                    };
                }
            };

            // Initialize the application
            window.SwitchApp = {
                // Initialize
                init: function() {
                    console.log('Initializing Switch application...');

                    // Apply user preferences
                    this.applyUserPreferences();

                    // Initialize routing
                    this.initRouter();

                    // Show splash screen
                    this.showSplashScreen();
                },

                // Apply user preferences
                applyUserPreferences: function() {
                    // Apply dark mode preference
                    if (localStorage.getItem('darkMode') === 'true') {
                        document.body.classList.add('dark-mode');
                    }
                },

                // Initialize router
                initRouter: function() {
                    // Create router
                    this.router = {
                        // Route map
                        routes: {
                            '/': 'src/pages/home.mono',
                            '/about': 'src/pages/about.mono',
                            '/tutorials': 'src/pages/tutorials.mono',
                            '/feedback': 'src/pages/feedback.mono',
                            '/enhanced': 'src/pages/enhanced.mono',
                            '/advanced': 'src/pages/advanced.mono'
                        },

                        // Current route
                        currentRoute: window.location.pathname,

                        // Navigate to a route
                        navigate: function(path) {
                            console.log('Navigating to:', path);

                            // Update URL hash
                            window.location.hash = path;

                            // Handle the route
                            this.handleRoute(path);
                        },

                        // Handle a route
                        handleRoute: function(path) {
                            console.log('Handling route:', path);

                            // Update current route
                            this.currentRoute = path;

                            // Get the file path for the route
                            const filePath = this.routes[path] || this.routes['/'];
                            console.log('Loading file:', filePath);

                            try {
                                // Render the page
                                SwitchApp.renderPage(filePath);

                                // Update active nav items
                                SwitchApp.updateActiveNavItems(path);
                            } catch (error) {
                                console.error('Error handling route:', error);
                            }
                        }
                    };

                    // Add event listener for navigation links
                    document.addEventListener('click', (event) => {
                        // Check if this is a navigation link
                        const link = event.target.closest('a[data-nav]');
                        if (link) {
                            // Prevent default link behavior
                            event.preventDefault();

                            // Get the href
                            const href = link.getAttribute('href');
                            console.log('Navigation link clicked, href:', href);

                            // Extract the path from the hash
                            const path = href.startsWith('#') ? href.substring(1) : href;
                            console.log('Path extracted:', path);

                            // Navigate to the path
                            this.router.navigate(path);
                        }
                    });

                    // Handle hash change events (browser back/forward)
                    window.addEventListener('hashchange', () => {
                        const hash = window.location.hash;
                        console.log('Hash changed to:', hash);
                        const path = hash.substring(1) || '/';
                        console.log('Path extracted:', path);
                        this.router.handleRoute(path);
                    });

                    // Handle initial route
                    let path = window.location.pathname;
                    const hash = window.location.hash;

                    console.log('Initial path:', path);
                    console.log('Initial hash:', hash);

                    // Check if we have a hash route
                    if (hash) {
                        path = hash.substring(1) || '/';
                        console.log('Using hash path:', path);
                    }
                    // If the path is a direct URL (like /about), handle it
                    else if (path !== '/' && !path.endsWith('.html') && !path.endsWith('.mono') && !path.includes('.')) {
                        // Redirect to index.html with the path as a hash
                        if (window.location.href !== window.location.origin + '/#' + path) {
                            window.location.href = '/#' + path;
                            return;
                        }
                    }

                    this.router.handleRoute(path);
                },

                // Render a page
                renderPage: function(filePath) {
                    console.log('Rendering page:', filePath);

                    // Get the container
                    const container = document.getElementById('app-container');

                    // Show loading state
                    container.innerHTML = `
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3">Loading ${filePath}...</p>
                        </div>
                    `;

                    // Fetch the file
                    fetch(filePath)
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Failed to load file');
                            }
                            return response.text();
                        })
                        .then(content => {
                            // Process the content (parse Mono component)
                            this.processMonoComponent(content, filePath, container);
                        })
                        .catch(error => {
                            // Show error
                            container.innerHTML = `
                                <div class="alert alert-danger" role="alert">
                                    <h4 class="alert-heading">Error Loading Page</h4>
                                    <p>${error.message}</p>
                                </div>
                            `;
                        });
                },

                // Process a Mono component
                processMonoComponent: function(content, filePath, container) {
                    console.log('Processing Mono component:', filePath);

                    try {
                        // Parse the component
                        const componentName = this.parseComponentName(content);

                        // Create a container for the rendered component
                        container.innerHTML = '';

                        // Create the component
                        this.createComponent(componentName, content, container);
                    } catch (error) {
                        console.error('Error processing component:', error);

                        // Show error
                        container.innerHTML = `
                            <div class="alert alert-danger" role="alert">
                                <h4 class="alert-heading">Error Processing Component</h4>
                                <p>${error.message}</p>
                            </div>
                        `;
                    }
                },

                // Parse component name from content
                parseComponentName: function(content) {
                    // Match component declaration
                    const match = content.match(/component\s+([A-Za-z0-9_]+)/);
                    if (match && match[1]) {
                        return match[1];
                    }

                    // Default name if not found
                    return 'UnknownComponent';
                },

                // Create a component
                createComponent: function(name, content, container) {
                    console.log('Creating component:', name);

                    try {
                        // Extract the render function
                        const renderMatch = content.match(/function\s+render\s*\(\s*\)\s*{([\s\S]*?)return\s+`([\s\S]*?)`\s*;?\s*}/);

                        if (renderMatch && renderMatch[2]) {
                            // Get the HTML template
                            let html = renderMatch[2];

                            // Process any template includes with @ symbol
                            html = this.processTemplateIncludes(html);

                            // Process template variables
                            html = this.processTemplateVariables(html, content);

                            // Render the component
                            container.innerHTML = html;

                            // Add animation
                            container.classList.remove('fade-in');
                            void container.offsetWidth; // Trigger reflow
                            container.classList.add('fade-in');

                            // Re-attach event listeners for navigation links
                            this.attachNavigationHandlers();

                            // Add event listener for dark mode toggle
                            const darkModeToggle = document.getElementById('dark-mode-toggle');
                            if (darkModeToggle) {
                                darkModeToggle.addEventListener('click', function(e) {
                                    e.preventDefault();

                                    // Toggle dark mode class on body
                                    document.body.classList.toggle('dark-mode');

                                    // Update localStorage
                                    const isDarkMode = document.body.classList.contains('dark-mode');
                                    localStorage.setItem('darkMode', isDarkMode);

                                    // Update the icon and text
                                    const icon = darkModeToggle.querySelector('i');
                                    if (isDarkMode) {
                                        icon.className = 'bi bi-sun me-1';
                                        darkModeToggle.innerHTML = icon.outerHTML + ' Light Mode';
                                    } else {
                                        icon.className = 'bi bi-moon me-1';
                                        darkModeToggle.innerHTML = icon.outerHTML + ' Dark Mode';
                                    }
                                });
                            }
                        } else {
                            throw new Error('Could not extract render function from component');
                        }
                    } catch (error) {
                        console.error('Error creating component:', error);
                        container.innerHTML = `
                            <div class="alert alert-danger" role="alert">
                                <h4 class="alert-heading">Error Creating Component</h4>
                                <p>${error.message}</p>
                            </div>
                        `;
                    }
                },

                // Add event handlers for the advanced page
                addAdvancedPageEventHandlers: function() {
                    // Find all elements with data-action attributes
                    const actionElements = document.querySelectorAll('[data-action]');

                    // Add click event listeners
                    actionElements.forEach(element => {
                        // Remove any existing event listeners
                        const newElement = element.cloneNode(true);
                        element.parentNode.replaceChild(newElement, element);

                        // Add new event listener
                        newElement.addEventListener('click', (event) => {
                            event.preventDefault();

                            const action = newElement.getAttribute('data-action');
                            const params = newElement.getAttribute('data-params');

                            console.log('Action clicked:', action, 'Params:', params);

                            // Handle different actions
                            if (action === 'setActiveDemo') {
                                this.handleSetActiveDemo(params);
                            } else if (action === 'setActiveLayout') {
                                this.handleSetActiveLayout(params);
                            } else if (action === 'setActiveTab') {
                                this.handleSetActiveTab(params);
                            } else if (action === 'openModal') {
                                this.handleOpenModal();
                            } else if (action === 'closeModal') {
                                this.handleCloseModal();
                            }
                        });
                    });
                },

                // Handle setActiveDemo action
                handleSetActiveDemo: function(demoId) {
                    console.log('Setting active demo:', demoId);

                    // Update the active demo
                    const demoLinks = document.querySelectorAll('.demo-nav li a');
                    demoLinks.forEach(link => {
                        const params = link.getAttribute('data-params');
                        if (params === demoId) {
                            link.parentElement.classList.add('active');
                        } else {
                            link.parentElement.classList.remove('active');
                        }
                    });

                    // Update the content
                    const mainContent = document.querySelector('.main-content');
                    if (mainContent) {
                        // Reload the page to update the content
                        window.location.reload();
                    }
                },

                // Handle setActiveLayout action
                handleSetActiveLayout: function(layoutId) {
                    console.log('Setting active layout:', layoutId);

                    // Update the active layout
                    const layoutLinks = document.querySelectorAll('.layouts-demo .demo-nav li a');
                    layoutLinks.forEach(link => {
                        const params = link.getAttribute('data-params');
                        if (params === layoutId) {
                            link.parentElement.classList.add('active');
                        } else {
                            link.parentElement.classList.remove('active');
                        }
                    });

                    // Reload the page to update the content
                    window.location.reload();
                },

                // Handle setActiveTab action
                handleSetActiveTab: function(tabId) {
                    console.log('Setting active tab:', tabId);

                    // Update the active tab
                    const tabLinks = document.querySelectorAll('.frames-demo .demo-nav li a');
                    tabLinks.forEach(link => {
                        const params = link.getAttribute('data-params');
                        if (params === tabId) {
                            link.parentElement.classList.add('active');
                        } else {
                            link.parentElement.classList.remove('active');
                        }
                    });

                    // Reload the page to update the content
                    window.location.reload();
                },

                // Handle openModal action
                handleOpenModal: function() {
                    console.log('Opening modal');

                    // Show the modal
                    const modal = document.querySelector('.modal-container');
                    if (modal) {
                        modal.style.display = 'flex';
                    }
                },

                // Handle closeModal action
                handleCloseModal: function() {
                    console.log('Closing modal');

                    // Hide the modal
                    const modal = document.querySelector('.modal-container');
                    if (modal) {
                        modal.style.display = 'none';
                    }
                },

                // Attach navigation handlers
                attachNavigationHandlers: function() {
                    // Find all navigation links
                    const navLinks = document.querySelectorAll('a[data-nav="true"]');

                    // Add event handlers for the advanced page
                    this.addAdvancedPageEventHandlers();

                    // Add click event listeners
                    navLinks.forEach(link => {
                        // Remove any existing event listeners
                        const newLink = link.cloneNode(true);
                        link.parentNode.replaceChild(newLink, link);

                        // Add new event listener
                        newLink.addEventListener('click', (event) => {
                            event.preventDefault();
                            const href = newLink.getAttribute('href');
                            console.log('Navigation link clicked in handler, href:', href);

                            // Extract the path from the hash
                            const path = href.startsWith('#') ? href.substring(1) : href;
                            console.log('Path extracted in handler:', path);

                            this.router.navigate(path);
                        });
                    });
                },

                // Process template includes with @ symbol
                processTemplateIncludes: function(content) {
                    // Match {{ '@/path/to/file' }} pattern
                    const includeRegex = /{{\s*['"]@\/([^'"]+)['"]\s*}}/g;

                    // Replace all includes with the actual content
                    return content.replace(includeRegex, (_, includePath) => {
                        // Resolve the path relative to the src directory
                        const fullPath = includePath.startsWith('src/') ? includePath : `src/${includePath}`;
                        console.log(`Including file: ${fullPath}`);

                        try {
                            // Try to fetch the file synchronously
                            const xhr = new XMLHttpRequest();
                            xhr.open('GET', fullPath, false); // false makes it synchronous
                            xhr.send(null);

                            if (xhr.status === 200) {
                                // Store the component in the global scope
                                this.registerComponent(fullPath, xhr.responseText);
                                return `<!-- @include: ${fullPath} -->\n${xhr.responseText}`;
                            } else {
                                console.error(`Failed to load include: ${fullPath}`);
                                return `<!-- Failed to include: ${fullPath} -->`;
                            }
                        } catch (error) {
                            console.error(`Error including file: ${fullPath}`, error);
                            return `<!-- Error including: ${fullPath} -->`;
                        }
                    });
                },

                // Register a component in the global scope
                registerComponent: function(path, content) {
                    // Extract the component name
                    const componentNameMatch = content.match(/component\s+([A-Za-z0-9_]+)/);
                    if (!componentNameMatch) return;

                    const componentName = componentNameMatch[1];
                    console.log(`Registering component: ${componentName} from ${path}`);

                    // Create a function to evaluate the component
                    const evalComponent = function(content) {
                        try {
                            // Create a temporary function to evaluate the component
                            const tempFn = new Function('switch', `
                                ${content}
                                return ${componentName};
                            `);

                            // Execute the function with the Switch object
                            return tempFn(window.Switch);
                        } catch (error) {
                            console.error(`Error evaluating component ${componentName}:`, error);
                            return null;
                        }
                    };

                    // Register the component in the global scope
                    window[componentName] = evalComponent(content);

                    console.log(`Component ${componentName} registered:`, window[componentName]);
                },

                // Process template variables
                processTemplateVariables: function(html, componentContent) {
                    console.log('Processing template variables');

                    // Add event handlers for the advanced page
                    this.addAdvancedPageEventHandlers();

                    // Extract state properties
                    const stateMatch = componentContent.match(/state\s*{([^}]*)}/);
                    let stateProps = {};

                    if (stateMatch && stateMatch[1]) {
                        const stateLines = stateMatch[1].split('\n');
                        stateLines.forEach(line => {
                            const propMatch = line.match(/\s*([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_]+)\s*=\s*(.+)/);
                            if (propMatch) {
                                const [_, name, type, value] = propMatch;
                                try {
                                    // Clean up the value (remove trailing commas, etc.)
                                    let cleanValue = value.trim().replace(/,$/, '');

                                    // Handle different types
                                    if (type === 'string') {
                                        // Remove quotes
                                        cleanValue = cleanValue.replace(/^["'](.*)["']$/, '$1');
                                    } else if (type === 'number') {
                                        cleanValue = parseFloat(cleanValue);
                                    } else if (type === 'boolean') {
                                        cleanValue = cleanValue === 'true';
                                    } else if (type === 'array') {
                                        try {
                                            // Handle array parsing more carefully
                                            if (cleanValue.trim() === '[]') {
                                                cleanValue = [];
                                            } else {
                                                // Try to safely convert to valid JSON
                                                const jsonStr = cleanValue
                                                    .replace(/'/g, '"')  // Replace single quotes with double quotes
                                                    .replace(/([{,]\s*)([a-zA-Z0-9_]+)(\s*:)/g, '$1"$2"$3')  // Add quotes to keys
                                                    .replace(/,\s*}/g, '}')  // Remove trailing commas
                                                    .replace(/,\s*]/g, ']');  // Remove trailing commas in arrays

                                                console.log('Attempting to parse:', jsonStr);
                                                cleanValue = JSON.parse(jsonStr);
                                            }
                                        } catch (e) {
                                            console.error('Error parsing array:', e, 'Original value:', cleanValue);
                                            cleanValue = [];
                                        }
                                    }

                                    stateProps[name] = cleanValue;
                                } catch (e) {
                                    console.error('Error processing state property:', e);
                                }
                            }
                        });
                    }

                    console.log('State properties:', stateProps);

                    // Extract function calls
                    const functionMatches = componentContent.match(/function\s+([a-zA-Z0-9_]+)\s*\([^)]*\)\s*{([^}]*)}/g);
                    let functions = {};

                    if (functionMatches) {
                        functionMatches.forEach(funcStr => {
                            const funcNameMatch = funcStr.match(/function\s+([a-zA-Z0-9_]+)/);
                            if (funcNameMatch && funcNameMatch[1] !== 'constructor' && funcNameMatch[1] !== 'render') {
                                const funcName = funcNameMatch[1];
                                functions[funcName] = funcStr;
                            }
                        });
                    }

                    console.log('Functions:', Object.keys(functions));

                    // Process ${this.state.xxx} variables
                    html = html.replace(/\${this\.state\.([a-zA-Z0-9_]+)}/g, (match, propName) => {
                        if (propName in stateProps) {
                            return stateProps[propName];
                        }
                        return match; // Keep original if not found
                    });

                    // Process ${this.renderXxx()} function calls
                    html = html.replace(/\${this\.([a-zA-Z0-9_]+)\(\)}/g, (match, funcName) => {
                        if (funcName in functions) {
                            try {
                                // Extract the function body
                                const funcBodyMatch = functions[funcName].match(/function\s+[a-zA-Z0-9_]+\s*\([^)]*\)\s*{([\s\S]*?)return\s+([^;]*);?\s*}/);
                                if (funcBodyMatch && funcBodyMatch[2]) {
                                    let result = funcBodyMatch[2].trim();

                                    // If it's returning html variable, find its value
                                    if (result === 'html') {
                                        const htmlVarMatch = funcBodyMatch[1].match(/var\s+html\s*=\s*["'](.*)["'];/);
                                        if (htmlVarMatch) {
                                            result = htmlVarMatch[1];
                                        } else {
                                            // Try to extract the html variable's final value
                                            const htmlLines = funcBodyMatch[1].split('\n');
                                            let htmlValue = '';

                                            for (let i = htmlLines.length - 1; i >= 0; i--) {
                                                if (htmlLines[i].includes('html +=') || htmlLines[i].includes('html =')) {
                                                    const valueMatch = htmlLines[i].match(/html\s*\+?=\s*`([^`]*)`/);
                                                    if (valueMatch) {
                                                        htmlValue = valueMatch[1] + htmlValue;
                                                    }
                                                }
                                            }

                                            if (htmlValue) {
                                                result = htmlValue;
                                            }
                                        }
                                    }

                                    return result;
                                }
                            } catch (e) {
                                console.error(`Error processing function ${funcName}:`, e);
                            }
                        }

                        // If we can't process the function, try to find a hardcoded implementation
                        if (funcName === 'renderFeatures') {
                            return this.renderFeaturesHardcoded();
                        }

                        return match; // Keep original if not found
                    });

                    // Process ${new Date().getFullYear()} and similar JavaScript expressions
                    html = html.replace(/\${new Date\(\)\.getFullYear\(\)}/g, new Date().getFullYear());

                    return html;
                },

                // Update active nav items
                updateActiveNavItems: function(path) {
                    // Find all navigation links
                    const navLinks = document.querySelectorAll('a[data-nav="true"]');

                    console.log('Updating active nav items for path:', path);

                    // Update active state
                    navLinks.forEach(link => {
                        const href = link.getAttribute('href');
                        console.log('Checking nav link:', href);

                        // Compare with both the path and the hash version
                        if (href === path || href === '#' + path || (path === '/' && href === '#/')) {
                            console.log('Setting active:', href);
                            link.classList.add('active');
                        } else {
                            link.classList.remove('active');
                        }
                    });
                },

                // Hardcoded implementation of renderFeatures for demo purposes
                renderFeaturesHardcoded: function() {
                    return `
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 feature-card" style="animation: fadeIn 0.5s ease-in-out 100ms both;">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon">
                                            <i class="bi bi-speedometer2"></i>
                                        </div>
                                        <h4 class="mb-0 ms-3">Fast & Lightweight</h4>
                                    </div>
                                    <p class="mb-0">Switch is designed to be fast and lightweight, with minimal dependencies and a small footprint.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 feature-card" style="animation: fadeIn 0.5s ease-in-out 200ms both;">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon">
                                            <i class="bi bi-puzzle"></i>
                                        </div>
                                        <h4 class="mb-0 ms-3">Component-Based</h4>
                                    </div>
                                    <p class="mb-0">Build your UI with reusable, composable components that are easy to understand and maintain.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 feature-card" style="animation: fadeIn 0.5s ease-in-out 300ms both;">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon">
                                            <i class="bi bi-lightning"></i>
                                        </div>
                                        <h4 class="mb-0 ms-3">Reactive</h4>
                                    </div>
                                    <p class="mb-0">Automatically update your UI when your data changes, with a simple and intuitive reactive programming model.</p>
                                </div>
                            </div>
                        </div>
                    `;
                },

                // Show splash screen
                showSplashScreen: function() {
                    // Create splash screen
                    const splashScreen = document.createElement('div');
                    splashScreen.style.position = 'fixed';
                    splashScreen.style.top = '0';
                    splashScreen.style.left = '0';
                    splashScreen.style.width = '100%';
                    splashScreen.style.height = '100%';
                    splashScreen.style.backgroundColor = document.body.classList.contains('dark-mode') ? '#222' : '#fff';
                    splashScreen.style.display = 'flex';
                    splashScreen.style.alignItems = 'center';
                    splashScreen.style.justifyContent = 'center';
                    splashScreen.style.flexDirection = 'column';
                    splashScreen.style.zIndex = '9999';
                    splashScreen.style.transition = 'opacity 0.5s ease';

                    splashScreen.innerHTML = `
                        <img src="src/static/img/switch-logo.svg" alt="Switch Logo" width="120" height="120" style="margin-bottom: 1rem;">
                        <h1 style="margin-bottom: 0.5rem;">Switch</h1>
                        <p style="margin-bottom: 1.5rem;">A modern web framework</p>
                        <div style="width: 200px; height: 4px; background-color: #eee; border-radius: 2px; overflow: hidden;">
                            <div id="progress-bar" style="width: 0%; height: 100%; background-color: #6200ea; transition: width 0.3s ease;"></div>
                        </div>
                    `;

                    // Add to body
                    document.body.appendChild(splashScreen);

                    // Animate progress bar
                    const progressBar = splashScreen.querySelector('#progress-bar');
                    const startTime = Date.now();
                    const duration = 1500;

                    const progressInterval = setInterval(function() {
                        const elapsed = Date.now() - startTime;
                        const progress = Math.min(100, (elapsed / duration) * 100);

                        progressBar.style.width = progress + '%';

                        if (progress >= 100) {
                            clearInterval(progressInterval);

                            // Hide splash screen
                            setTimeout(function() {
                                splashScreen.style.opacity = '0';

                                // Remove splash screen after animation
                                setTimeout(function() {
                                    if (splashScreen.parentNode) {
                                        splashScreen.parentNode.removeChild(splashScreen);
                                    }
                                }, 500);
                            }, 300);
                        }
                    }, 30);
                }
            };

            // Initialize the application
            SwitchApp.init();
        });
    </script>
</body>
</html>
